<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>DDDICE Public D20 Test</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #000;
      width: 100%;
      height: 100%;
    }

    #dice-container {
      width: 100vw;
      height: 100vh;
    }

    #rollBtn {
      position: absolute;
      z-index: 10;
      top: 20px;
      left: 20px;
      padding: 10px 16px;
      background: #fff;
      color: #000;
      font-size: 16px;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <button id="rollBtn">Roll D20</button>
  <div id="dice-container"></div>

  <!-- Self-hosted DDDice SDK -->
  <script src="./js/dddice.min.js"></script>

  <script>
    // Ensure everything runs after page and SDK load
    window.onload = function() {
      let dice;
      let diceReady = false;
      const container = document.getElementById("dice-container");

      // Create a public theme D20 dice
      dice = new ThreeDDice(container, {
        theme: "standard", // public/default dice theme
        showUI: false
      });

      // Initialize dice
      dice.initialize()
        .then(() => {
          diceReady = true;
          console.log("DDDICE public theme loaded and ready!");
        })
        .catch(err => {
          console.error("Error initializing dice:", err);
        });

      // Roll button
      document.getElementById("rollBtn").addEventListener("click", () => {
        if (!diceReady) {
          console.log("Dice not ready yet, please wait...");
          return;
        }

        dice.roll([{ type: "d20", theme: "standard" }])
          .then(results => {
            console.log("D20 roll result:", results[0].value);
            alert("You rolled: " + results[0].value);
          })
          .catch(err => {
            console.error("Error rolling dice:", err);
          });
      });

      // Resize container on window resize
      window.addEventListener("resize", () => {
        container.style.width = window.innerWidth + "px";
        container.style.height = window.innerHeight + "px";
      });
    };
  </script>
</body>
</html>
